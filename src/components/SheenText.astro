---
/**
 * SheenText Component
 *
 * Displays text with a left-to-right colour sweep animation on hover.
 * The sheen highlights the centre character with the highlight colour
 * and blends adjacent characters.
 *
 * Supports spreading additional attributes (data-*, aria-*, etc.)
 *
 * @param text - The text to display
 * @param tag - The HTML tag to render (default: 'span')
 * @param interval - Animation speed in ms per character (default: 15)
 * @param spread - Number of characters to highlight on each side (default: 2)
 */

interface Props extends astroHTML.JSX.HTMLAttributes {
  text: string;
  tag?: keyof HTMLElementTagNameMap;
  interval?: number;
  spread?: number;
}

const {
  text,
  tag: Tag = 'span',
  class: className,
  interval = 15,
  spread = 2,
  ...attrs
} = Astro.props;
---

<Tag
  class:list={['sheen-text', className]}
  data-sheen-text={text}
  data-sheen-interval={interval}
  data-sheen-spread={spread}
  {...attrs}
>
  {text}
</Tag>

<script src="../scripts/sheen.ts"></script>

<style>
  .sheen-text :global(.sheen-word) {
    display: inline-block;
    white-space: nowrap;
  }

  .sheen-text :global(.sheen-char) {
    display: inline-block;
    transition: color var(--transition-instant);
  }

  @media (prefers-reduced-motion: reduce) {
    .sheen-text :global(.sheen-char) {
      transition: none;
    }
  }
</style>
