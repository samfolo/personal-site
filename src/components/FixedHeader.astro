---
/**
 * FixedHeader Component
 *
 * Fixed header that appears when hero wordmark scrolls out of view.
 * Contains wordmark, navigation, and theme switcher.
 */

import ThemeSwitcher from './ThemeSwitcher.astro';
import NavLink from './NavLink.astro';

const navLinks = [
  { href: '/blog', label: 'Blog' },
  { href: '/about', label: 'About' },
  { href: '/uses', label: 'Uses' },
] as const;
---

<header id="fixed-header" class="fixed-header">
  <div class="header-inner">
    <div class="header-left">
      <a href="/" class="wordmark min-h-11 inline-flex items-center" aria-label="Go to home">
        <span class="hidden md:block">Sam Folorunsho.</span>
        <span class="block md:hidden logomark font-semibold text-xl">SF.</span>
      </a>
      <nav class="nav" aria-label="Main navigation">
        {navLinks.map((link) => (
          <NavLink href={link.href}>
            {link.label}
          </NavLink>
        ))}
      </nav>
    </div>
    <div class="header-right">
      <ThemeSwitcher size="sm" />
    </div>
  </div>
</header>

<style>
  .fixed-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: var(--z-header);
    background: var(--bg);

    /* Hidden by default */
    opacity: 0;
    transform: translateY(-100%);
    pointer-events: none;
    transition:
      opacity var(--transition-slow),
      transform var(--transition-slow);
  }

  .fixed-header.visible {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }

  .header-inner {
    max-width: var(--container-max);
    margin: 0 auto;
    padding: var(--space-4) var(--container-px);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .header-left {
    display: flex;
    align-items: center;
    gap: var(--space-6);
  }

  .wordmark {
    font-weight: var(--font-semibold);
    font-size: var(--text-sm);
    letter-spacing: var(--tracking-display);
    color: var(--fg);
    transition: opacity var(--transition-fast);
  }

  .wordmark:hover {
    opacity: 0.8;
  }

  .wordmark:focus-visible {
    outline: var(--outline-width) solid var(--fg);
    outline-offset: var(--outline-offset);
  }

  .nav {
    display: flex;
    gap: var(--space-5);
  }

  .header-right {
    display: flex;
    align-items: center;
  }

  @media (prefers-reduced-motion: reduce) {
    .fixed-header,
    .wordmark {
      transition: none;
    }
  }
</style>

<script>
  function initWordmark() {
    const wordmark = document.querySelector('.fixed-header .wordmark');

    wordmark?.addEventListener('click', (e) => {
      if (window.location.pathname === '/') {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    });
  }

  initWordmark();
  document.addEventListener('astro:after-swap', initWordmark);
</script>
