/**
 * Global Styles
 *
 * Imports design tokens, configures Tailwind theme, and provides base styles.
 * Uses CSS cascade layers for proper specificity ordering.
 */

/* ==========================================================================
   CSS Layer Order
   ========================================================================== */

@layer reset, tokens, base, components, utilities;

/* ==========================================================================
   Design Tokens
   ========================================================================== */

@import './tokens/index.css';

/* ==========================================================================
   Tailwind CSS
   ========================================================================== */

@import 'tailwindcss';

@plugin "@tailwindcss/typography";

@import './prose.css';
@import './components/shiki.css';

/* ==========================================================================
   View Transitions
   ========================================================================== */

@import './transitions.css';

/* ==========================================================================
   Tailwind v4 Theme Configuration
   ========================================================================== */

@theme {
  /* Colours - semantic tokens */
  --color-bg: var(--bg);
  --color-fg: var(--fg);
  --color-muted: var(--muted);
  --color-rule: var(--rule);
  --color-highlight: var(--highlight);
  --color-emphasis: var(--emphasis);

  /* Font families */
  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);

  /* Font sizes - Minor Third scale */
  --text-xs: var(--text-xs);
  --text-sm: var(--text-sm);
  --text-base: var(--text-base);
  --text-md: var(--text-md);
  --text-lg: var(--text-lg);
  --text-xl: var(--text-xl);
  --text-2xl: var(--text-2xl);
  --text-3xl: var(--text-3xl);

  /* Spacing - Base-8 scale */
  --spacing-05: var(--space-05);
  --spacing-1: var(--space-1);
  --spacing-2: var(--space-2);
  --spacing-3: var(--space-3);
  --spacing-4: var(--space-4);
  --spacing-5: var(--space-5);
  --spacing-6: var(--space-6);
  --spacing-7: var(--space-7);
  --spacing-8: var(--space-8);
  --spacing-9: var(--space-9);

  /* Letter spacing */
  --tracking-display: var(--tracking-display);
  --tracking-labels: var(--tracking-labels);
  --tracking-body: var(--tracking-body);

  /* Line heights */
  --leading-tighter: var(--leading-tighter);
  --leading-none: var(--leading-none);
  --leading-tight: var(--leading-tight);
  --leading-snug: var(--leading-snug);
  --leading-normal: var(--leading-normal);
  --leading-relaxed: var(--leading-relaxed);
  --leading-loose: var(--leading-loose);

  /* Z-index scale */
  --z-behind: var(--z-behind);
  --z-base: var(--z-base);
  --z-raised: var(--z-raised);
  --z-dropdown: var(--z-dropdown);
  --z-sticky: var(--z-sticky);
  --z-overlay: var(--z-overlay);
  --z-modal: var(--z-modal);
  --z-popover: var(--z-popover);
  --z-tooltip: var(--z-tooltip);
  --z-header: var(--z-header);
  --z-max: var(--z-max);
}

/* ==========================================================================
   CSS Reset (Minimal)
   ========================================================================== */

@layer reset {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  ul,
  ol {
    list-style: none;
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  img,
  picture,
  video,
  canvas,
  svg {
    display: block;
    max-width: 100%;
  }

  input,
  button,
  textarea,
  select {
    font: inherit;
  }
}

/* ==========================================================================
   Base Styles
   ========================================================================== */

@layer base {
  :root {
    --header-height: 64px;
  }

  body {
    font-family: var(--font-sans);
    font-size: var(--text-base);
    font-weight: var(--font-regular);
    line-height: var(--leading-normal);
    letter-spacing: var(--tracking-body);
    color: var(--fg);
    transition: background var(--transition-slow), color var(--transition-slow);
    background-color: var(--bg);
  }

  code,
  pre {
    font-family: var(--font-mono);
  }

  /* Scroll offset for fixed header */
  [id] {
    scroll-margin-top: calc(var(--header-height) + var(--space-4));
  }
}
