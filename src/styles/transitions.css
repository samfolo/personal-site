/**
 * View Transitions
 *
 * Custom animations for Astro View Transitions.
 * Uses sequential fade (out then in) to prevent text overlap.
 *
 * Transition modes:
 * - Full page (root): Used for home ↔ any page transitions
 * - Content only: Used for non-home ↔ non-home transitions
 */

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* ==========================================================================
   Full Page Transitions (default)
   ========================================================================== */

/* Persist background colour during transition */
::view-transition-group(root) {
  background-color: var(--bg);
}

::view-transition-old(root) {
  animation: fadeOut var(--duration-fast) var(--ease-default) forwards;
}

::view-transition-new(root) {
  animation: fadeIn var(--duration-fast) var(--ease-default) var(--duration-fast) forwards;
  opacity: 0;
}

/* ==========================================================================
   Content-Only Transitions
   Applied when navigating between non-home pages
   ========================================================================== */

/* Header persists without animation */
::view-transition-old(header),
::view-transition-new(header) {
  animation: none;
}

/* Footer persists without animation */
::view-transition-old(footer),
::view-transition-new(footer) {
  animation: none;
}

/* Content fades with sequential animation */
::view-transition-old(main-content) {
  animation: fadeOut var(--duration-fast) var(--ease-default) forwards;
}

::view-transition-new(main-content) {
  animation: fadeIn var(--duration-fast) var(--ease-default) var(--duration-fast) forwards;
  opacity: 0;
}

/* ==========================================================================
   Reduced Motion
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  ::view-transition-old(root),
  ::view-transition-new(root),
  ::view-transition-old(main-content),
  ::view-transition-new(main-content) {
    animation: none;
  }
}
