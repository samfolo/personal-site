/**
 * View Transitions
 *
 * Header and footer persist in place (no animation).
 * Everything else fades via root transition.
 */

/* Preserve background colour during transition */
::view-transition-group(root) {
  background-color: var(--bg);
}

/* Persistent elements: no animation, stay in place */
::view-transition-group(header),
::view-transition-group(footer),
::view-transition-group(uses-header),
::view-transition-group(uses-tabs),
::view-transition-old(header),
::view-transition-new(header),
::view-transition-old(footer),
::view-transition-new(footer),
::view-transition-old(uses-header),
::view-transition-new(uses-header),
::view-transition-old(uses-tabs),
::view-transition-new(uses-tabs) {
  animation: none;
}

/* Sequential fade: out then in */
::view-transition-old(root) {
  animation: fade-out var(--duration-fast) var(--ease-default) forwards;
}

::view-transition-new(root) {
  opacity: 0;
  animation: fade-in var(--duration-fast) var(--ease-default)
    var(--duration-fast) forwards;
}

@keyframes fade-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@media (prefers-reduced-motion: reduce) {
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation: none;
  }
  ::view-transition-new(root) {
    opacity: 1;
  }
}
